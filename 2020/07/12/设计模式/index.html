<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="设计模式"><meta name="keywords" content="设计模式"><meta name="author" content="小王同学"><meta name="copyright" content="小王同学"><title>设计模式 | 小王同学的精神驿站</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://v1.hitokoto.cn/?encode=js&amp;charset=utf-8&amp;select=.footer_custom_text" defer></script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"LZQCIQZ454","apiKey":"97649af295e704cd4588883b375c23ef","indexName":"mySearch","hits":{"per_page":10},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">设计模式   封装变化点 面向接口编程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">一、前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">二、设计模式与框架</span></a></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">三、设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E8%A1%8C%E4%B8%BA%E5%9E%8B"><span class="toc-text">3.1 行为型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.1.1 策略模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-1-%E7%BB%93%E6%9E%84"><span class="toc-text">3.1.1.1 结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-2-%E5%B0%8F%E6%A1%86%E6%9E%B6"><span class="toc-text">3.1.1.2 小框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-3-%E5%BA%94%E7%94%A8%E5%B0%8F%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">3.1.1.3 应用小框架编写应用程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-4-%E9%80%82%E5%90%88%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">3.1.1.4 适合策略模式的场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.1.2 观察者模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-1-%E7%BB%93%E6%9E%84"><span class="toc-text">3.1.2.1 结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-2-%E5%B0%8F%E6%A1%86%E6%9E%B6"><span class="toc-text">3.1.2.2 小框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-3-%E5%BA%94%E7%94%A8%E5%B0%8F%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">3.1.2.3 应用小框架编写应用程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2-4-%E9%80%82%E5%90%88%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">3.1.2.4 适合策略模式的场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E7%BB%93%E6%9E%84%E5%9E%8B"><span class="toc-text">3.2 结构型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.2.1 装饰模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-1-%E7%BB%93%E6%9E%84"><span class="toc-text">3.2.1.1 结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-2-%E5%B0%8F%E6%A1%86%E6%9E%B6"><span class="toc-text">3.2.1.2 小框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-3-%E5%BA%94%E7%94%A8%E5%B0%8F%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">3.2.1.3 应用小框架编写应用程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-4-%E9%80%82%E5%90%88%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">3.2.1.4 适合装饰模式的场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.2.2 适配器模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-1-%E7%BB%93%E6%9E%84"><span class="toc-text">3.2.2.1 结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-2-%E5%B0%8F%E6%A1%86%E6%9E%B6"><span class="toc-text">3.2.2.2 小框架</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-3-%E5%BA%94%E7%94%A8%E5%B0%8F%E6%A1%86%E6%9E%B6%E7%BC%96%E5%86%99%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-text">3.2.2.3 应用小框架编写应用程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-4-%E9%80%82%E5%90%88%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%9C%BA%E6%99%AF"><span class="toc-text">3.2.2.4 适合适配器模式的场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E5%88%9B%E5%BB%BA%E5%9E%8B"><span class="toc-text">3.3 创建型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F"><span class="toc-text">3.3.1 工厂方法模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-text">四、设计模式所支持的设计的可变方面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E5%88%9B%E5%BB%BA%E5%9E%8B"><span class="toc-text">4.1 创建型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E7%BB%93%E6%9E%84%E5%9E%8B"><span class="toc-text">4.2 结构型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E8%A1%8C%E4%B8%BA%E5%9E%8B"><span class="toc-text">4.3 行为型</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">小王同学</div><div class="author-info__description text-center">心中有梦，眼里有光</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/VanCholen">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">56</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">31</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">22</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友情链接-Links</div><a class="author-info-links__name text-center" target="_blank" rel="noopener" href="https://github.com/VanCholen">GitHub</a><a class="author-info-links__name text-center">WeiBo</a><a class="author-info-links__name text-center">CSDN</a><a class="author-info-links__name text-center">知乎</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(/img/wallhaven-8ogod1.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">小王同学的精神驿站</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title">设计模式</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-07-12</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2020/07/12/设计模式/"></span></a><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">5k</span><span class="post-meta__separator">|</span><span>阅读时长: 18 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1>设计模式   封装变化点 面向接口编程</h1>
<h1>一、前言</h1>
<p>进行设计时，<strong>重在深刻理解面向对象的设计思想，而不是牵强地套用某个设计模式</strong>。</p>
<p>因为使用设计模式往往会在系统中添加更多的层，在系统中增加额外的类和对象，影响系统的效率。</p>
<span id="more"></span>
<p>下面讲述一些导致系统重新设计的一般原因，以及解决这些问题的设计模式</p>
<p>(1) 通过显示地指定一个类来创建对象</p>
<blockquote>
<p>在创建对象时指定类名将使你受特定实现的约束而不是特定接口的约束。这会使未来的变化更复杂。要避免这种情况，应该间接地创建对象。</p>
<p>设计模式:</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Abstract Factory</p>
</li>
<li class="lvl-2">
<p>Factory Method</p>
</li>
<li class="lvl-2">
<p>Prototype</p>
</li>
</ul>
</blockquote>
<p>(2)对特殊操作的依赖</p>
<blockquote>
<p>当你为请求指定一个特殊的操作时，完成该请求的方式就固定下来了。为避免把请求代码写死，你可以在编译时或运行时很方便地改变响应请求的方法。</p>
<p>设计模式:</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Chain of Responsibility</p>
</li>
<li class="lvl-2">
<p>Command</p>
</li>
</ul>
</blockquote>
<p>(3)对硬件和软件平台的依赖</p>
<blockquote>
<p>外部的操作系统接口和应用编程接口（API）在不同的软硬件平台上是不同的。依赖于特定平台的软件将很难已知到其他平台上，甚至很难跟上平地平台的更新，所以设计系统时限制其平台相关性就很重要了。</p>
<p>设计模式:</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Abstract Factory</p>
</li>
<li class="lvl-2">
<p>Bridge</p>
</li>
</ul>
</blockquote>
<p>(4)对对象表示或实现的依赖</p>
<blockquote>
<p>知道对象怎么表示、保存、定位或实现的客户在对象发生变化时可能也需要变化。对客户隐藏这些信息能阻止连锁变化。</p>
<p>设计模式:</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Abstract Factory</p>
</li>
<li class="lvl-2">
<p>Bridge</p>
</li>
<li class="lvl-2">
<p>Memento</p>
</li>
<li class="lvl-2">
<p>Proxy</p>
</li>
</ul>
</blockquote>
<p>(5)算法依赖</p>
<blockquote>
<p>算法在开发和复用时常常被扩展、优化和替代。依赖于某个特定算法的对象在算法发生变化时不得不变化。因此有可能发生变化的算法应该被孤立起来。</p>
<p>设计模式：</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Builder</p>
</li>
<li class="lvl-2">
<p>Iterator</p>
</li>
<li class="lvl-2">
<p>Strategy</p>
</li>
<li class="lvl-2">
<p>Template Method</p>
</li>
<li class="lvl-2">
<p>Visitor</p>
</li>
</ul>
</blockquote>
<p>(6)紧耦合</p>
<blockquote>
<p>紧耦合的类很难单独地被复用，因为它们是互相依赖的。紧耦合产生单块的系统，要改变或删掉一个类，你必须理解和改变其他许多类。这样的系统是一个很难学习、移植和维护的密集体。</p>
<p>松散耦合提高了一个类本身被复用的可能性，并且系统更易于学习、移植、修改和扩展。设计模式使用<strong>松散耦合</strong>和<strong>分层技术</strong>来提高系统的松散耦合性。</p>
<p>设计模式：</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Abstract Factory</p>
</li>
<li class="lvl-2">
<p>Command</p>
</li>
<li class="lvl-2">
<p>Facade</p>
</li>
<li class="lvl-2">
<p>Mediator</p>
</li>
<li class="lvl-2">
<p>Observer</p>
</li>
<li class="lvl-2">
<p>Chain of Responsibility</p>
</li>
</ul>
</blockquote>
<p>(7) 通过生成子类来扩充功能</p>
<blockquote>
<p>通常很难通过定义子类来定制对象。每一个新类都有固定的实现开销（初始化、终止处理等）。定义子类还需要对父类有深入的了解。例如，重定义一个操作可能需要重定义其他操作。一个被重定义的操作可能需要调用继承下来的操作。并且子类方法会导致类爆炸，因为即使对于一个简单的扩充，你也不得不引入许多新的子类。</p>
<p>一般的对象组合技术和具体的委托技术，是继承之外组合对象行为的另一种灵活方法。<strong>新的功能可以通过以新的方式组合已有对象，而不是通过定义已存在的类的子类的方式加到应用中去</strong>。另一方面，过多的使用对象组合会使设计难于理解。许多设计模式产生的设计中，可以定义一个子类，且将它的实例和已存在的实例进行组合来引入定制的功能。</p>
<p>设计模式：</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Bridge</p>
</li>
<li class="lvl-2">
<p>Chain of Responsibility</p>
</li>
<li class="lvl-2">
<p>Composite</p>
</li>
<li class="lvl-2">
<p>Decorator</p>
</li>
<li class="lvl-2">
<p>Observer</p>
</li>
<li class="lvl-2">
<p>Strategy</p>
</li>
</ul>
</blockquote>
<p>(8)不能方便地对类进行修改</p>
<blockquote>
<p>有时你不得不改变一个难以修改的类。也许你需要源代码而又没有（对于商业类库就有这种情况），或者可能对类的任何改变会要求修改许多已存在的其他子类。设计模式提供在这些情况下对类修改的方法。</p>
<p>设计模式：</p>
<ul class="lvl-1">
<li class="lvl-2">
<p>Adapter</p>
</li>
<li class="lvl-2">
<p>Decorator</p>
</li>
<li class="lvl-2">
<p>Visitor</p>
</li>
</ul>
</blockquote>
<h1>二、设计模式与框架</h1>
<p>谈到<strong>设计模式</strong>，就不可避免地要谈到<strong>框架</strong>。</p>
<p><strong>框架不是设计模式</strong>，<strong>框架是针对某个领域，提供用于开发应用系统的类的集合</strong>，程序设计者可以使用框架提供的类设计一个应用程序，而且在<strong>设计应用程序时可以针对特定的问题使用某个设计模式</strong>。</p>
<ul class="lvl-0">
<li class="lvl-2">
<p>层次不同</p>
<blockquote>
<p>设计模式比框架更抽象 ，它是从软件系统中总结出的成功的、可复用的<strong>设计方案</strong>，设计模式不能向使用者提供直接可以使用的类，设计模式只有在被设计人员使用时才能表示为代码。</p>
<p>框架，可以简单的理解为用于设计解决某个问题的一些<strong>类的集合</strong>。例如在Java中，开发人员使用Swing框架提供的类设计用户界面，使用Set集合框架提供的类处理数据结构相关的算法等。</p>
</blockquote>
</li>
<li class="lvl-2">
<p>范围不同</p>
<blockquote>
<p>设计模式是逻辑概念，独立于编程语言。</p>
<p>框架是具体的，以具体的软件组织存在，只能被特定的软件设计者使用。例如在Java中，Java提供的Swing框架只能被Java应用程序所使用。</p>
</blockquote>
</li>
<li class="lvl-2">
<p>相互关系</p>
<blockquote>
<p>一个框架中往往包含多个设计模式。</p>
<p>根据设计模式可以设计出一个框架（譬如后文的简单问题+应用程序）</p>
</blockquote>
</li>
</ul>
<h1>三、设计模式</h1>
<h2 id="3-1-行为型">3.1 行为型</h2>
<p>涉及怎么合理的设计对象之间的<strong>交互通信</strong>，怎么合理的为对象<strong>分配职责</strong></p>
<h3 id="3-1-1-策略模式">3.1.1 策略模式</h3>
<p>定义<strong>一系列算法</strong>，把它们一个个封装起来，并且使它们可以相互替换。使得<strong>算法独立于使用它的客户的而变化</strong>。</p>
<h4 id="3-1-1-1-结构">3.1.1.1 结构</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>策略（Strategy）接口</strong></p>
<blockquote>
<p>是一个<strong>接口</strong>，定义了若干个抽象方法。（algorithm）</p>
</blockquote>
</li>
<li class="lvl-2">
<p>上下文(Context)</p>
<blockquote>
<p><strong>关联于策略接口的类</strong></p>
<p>包含用策略声明的变量</p>
<p>提供一个方法，该方法<strong>委托</strong>策略变量调用具体策略所实现的策略接口中的方法</p>
</blockquote>
</li>
<li class="lvl-2">
<p>具体策略(ConcreteStrategy)</p>
<blockquote>
<p>实现策略接口的类，给出具体的算法</p>
</blockquote>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210712145926673.png" alt></p>
</li>
</ul>
<h4 id="3-1-1-2-小框架">3.1.1.2 小框架</h4>
<p>在多个裁判负责打分的比赛中，每位裁判给选手打一个分，选手的最后得分是根据全体裁判的得分计算出来的。请给出几种计算选手得分的评分方案（策略），对于某次比赛，可以从你的方案中选择一种方案作为本次比赛的评分方案。</p>
<p>Strategy.java    (策略)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">computeAverage</span><span class="params">(<span class="keyword">double</span>[] a)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AverageScore.java    (上下文)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AverageScore</span> </span>&#123;</span><br><span class="line">    Strategy strategy;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStrategy</span><span class="params">(Strategy strategy)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.strategy = strategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getAverage</span><span class="params">(<span class="keyword">double</span>[] a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (strategy != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> strategy.computeAverage(a);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;没有求平均值的算法，得到的-1不代表平均值&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>StrategyA.java  (具体策略)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 直接取代数平均值</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StrategyA</span> <span class="keyword">implements</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">computeAverage</span><span class="params">(<span class="keyword">double</span>[] a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> score = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">            sum += a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        score = sum / a.length;</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>StrategyB.java  (具体策略)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Array;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去掉一个最大值和最小值，然后求平均</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StrategyB</span> <span class="keyword">implements</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">computeAverage</span><span class="params">(<span class="keyword">double</span>[] a)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (a.length &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> score = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">        Arrays.sort(a);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; a.length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            sum += a[i];</span><br><span class="line">        &#125;</span><br><span class="line">        score = sum / (a.length - <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-1-1-3-应用小框架编写应用程序">3.1.1.3 应用小框架编写应用程序</h4>
<p>把上述那些类看成一个小框架，使用小框架中的类编写一个应用程序</p>
<p>Application.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    String name;</span><br><span class="line">    <span class="keyword">double</span> score;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScore</span><span class="params">(<span class="keyword">double</span> score)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getScore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.score;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AverageScore game = <span class="keyword">new</span> AverageScore();<span class="comment">// 上下文对象game</span></span><br><span class="line">        game.setStrategy(<span class="keyword">new</span> StrategyA());<span class="comment">// 上下文对象使用具体策略 使用算法1计算平均值</span></span><br><span class="line">        Person zhang = <span class="keyword">new</span> Person();</span><br><span class="line">        zhang.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        <span class="keyword">double</span>[] a = &#123; <span class="number">9.12</span>, <span class="number">9.25</span>, <span class="number">8.87</span>, <span class="number">9.99</span>, <span class="number">6.99</span>, <span class="number">7.88</span> &#125;;</span><br><span class="line">        <span class="keyword">double</span> aver = game.getAverage(a); <span class="comment">// 上下文对象得到平均值</span></span><br><span class="line">        zhang.setScore(aver);</span><br><span class="line">        System.out.println(<span class="string">&quot;算法A：&quot;</span>);</span><br><span class="line">        System.out.printf(<span class="string">&quot;%s最后得分：%5.3f%n&quot;</span>, zhang.getName(), zhang.getScore());</span><br><span class="line">        game.setStrategy(<span class="keyword">new</span> StrategyB());</span><br><span class="line">        aver = game.getAverage(a);<span class="comment">// 上下文对象得到平均值</span></span><br><span class="line">        zhang.setScore(aver);</span><br><span class="line">        System.out.println(<span class="string">&quot;算法B：&quot;</span>);</span><br><span class="line">        System.out.printf(<span class="string">&quot;%s最后得分：%5.3f%n&quot;</span>, zhang.getName(), zhang.getScore());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210712204558850.png" alt></p>
<h4 id="3-1-1-4-适合策略模式的场景">3.1.1.4 适合策略模式的场景</h4>
<ol>
<li class="lvl-3">
<p><strong>需要使用一个算法的不同变体</strong></p>
</li>
<li class="lvl-3">
<p>程序的主要类（相当于上下文角色）不希望暴露复杂的、与算法相关的数据结构，那么可以使用策略模式封装算法，即将算法分别封装到具体的策略中。</p>
</li>
<li class="lvl-3">
<p>一个类定义了多种行为，并且这些行为在这个类的方法中以<strong>多个条件语句</strong>的形式出现，那么可以使用策略模式避免在类中使用大量的条件语句。</p>
</li>
</ol>
<h3 id="3-1-2-观察者模式">3.1.2 观察者模式</h3>
<p><strong>在不改变各个元素的类的前提下定义作用于这些元素的新操作</strong></p>
<p>又叫<strong>发布-订阅(Publish/Subscribe)模式、模型-视图(Model/View)模式、源-监听器(Source/Listener)模式或从属者(Dependents)模式。</strong></p>
<h4 id="3-1-2-1-结构">3.1.2.1 结构</h4>
<p><strong>双重分派</strong>技术，将数据的存储和操作解耦合。当执行</p>
<p><strong>元素.accept(访问者)</strong></p>
<p>时，就会导致执行</p>
<p><strong>访问者.visit(元素)</strong></p>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>访问者（Visitor）接口</strong></p>
<blockquote>
<p>依赖于抽象元素类，定义了操作元素的方法</p>
</blockquote>
</li>
<li class="lvl-2">
<p><strong>抽象元素（Element）类</strong></p>
<blockquote>
<p>依赖于抽象接口，定义了接收访问者的方法</p>
</blockquote>
</li>
<li class="lvl-2">
<p>具体访问者</p>
</li>
<li class="lvl-2">
<p>具体元素</p>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210715185135957.png" alt></p>
</li>
</ul>
<h4 id="3-1-2-2-小框架">3.1.2.2 小框架</h4>
<p><strong>某个类可能用自己的实例方法操作自己的数据，但在某些设计中，可能需要定义作用于类中的数据的新操作，而且这个新的操作不应该由该类中的某个实例方法来承担。</strong></p>
<p>根据电表显示的电量，计算用户的电费。电表由自己的显示用电量的方法（用显示盘显示），但需要定义一个方法来计算电费，即<strong>需要定义作用于电量的新操作</strong>，显然这个新的操作不应当由电表来承担。按照<strong>家用标准计算电表的”计表员“<strong>和按</strong>工业标准计算电表的”计表员“</strong>。</p>
<p>抽象访问者接口</p>
<p>Visitor.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">visit</span><span class="params">(AmmeterElement element)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>抽象元素类</p>
<p>AmmeterElement.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AmmeterElement</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor v)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">double</span> <span class="title">showElectricAmount</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">setElectricAmount</span><span class="params">(<span class="keyword">double</span> n)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体访问者</p>
<p>HomeAmmeterVisitor.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeAmmeterVisitor</span> <span class="keyword">implements</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">visit</span><span class="params">(AmmeterElement element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> charge = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> unitOne = <span class="number">0.6</span>;</span><br><span class="line">        <span class="keyword">double</span> unitTwo = <span class="number">1.05</span>;</span><br><span class="line">        <span class="keyword">int</span> basic = <span class="number">6000</span>;</span><br><span class="line">        <span class="keyword">double</span> n = element.showElectricAmount();</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= basic) &#123;</span><br><span class="line">            charge = n * unitOne;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            charge = basic * unitOne + (n - basic) * unitTwo;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> charge;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>IndustryAmmeterVisitor.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndustryAmmeterVisitor</span> <span class="keyword">implements</span> <span class="title">Visitor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">visit</span><span class="params">(AmmeterElement element)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> charge = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> unitOne = <span class="number">1.52</span>;</span><br><span class="line">        <span class="keyword">double</span> unitTwo = <span class="number">2.78</span>;</span><br><span class="line">        <span class="keyword">int</span> basic = <span class="number">15000</span>;</span><br><span class="line">        <span class="keyword">double</span> n = element.showElectricAmount();</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= basic) &#123;</span><br><span class="line">            charge = n * unitOne;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            charge = basic * unitOne + (n - basic) * unitTwo;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> charge;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体元素</p>
<p>Ammeter.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Ammeter</span> <span class="keyword">extends</span> <span class="title">AmmeterElement</span> </span>&#123;</span><br><span class="line">    <span class="keyword">double</span> electricAmount; <span class="comment">// 电表的电量</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Visitor v)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> feiyong = v.visit(<span class="keyword">this</span>); <span class="comment">// 让访问者访问当前元素</span></span><br><span class="line">        System.out.println(<span class="string">&quot;当前电表的用户需要交纳电费：&quot;</span> + feiyong + <span class="string">&quot;元.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">showElectricAmount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.electricAmount;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setElectricAmount</span><span class="params">(<span class="keyword">double</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.electricAmount = n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-1-2-3-应用小框架编写应用程序">3.1.2.3 应用小框架编写应用程序</h4>
<p>把上述那些类看成一个小框架，使用小框架中的类编写一个应用程序</p>
<p>Application.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Ammeter ammeter = <span class="keyword">new</span> Ammeter(); <span class="comment">// 电表</span></span><br><span class="line">        Visitor homeVisitor = <span class="keyword">new</span> HomeAmmeterVisitor(); <span class="comment">// 按照家用标准计算电费的”计表员“</span></span><br><span class="line">        ammeter.setElectricAmount(<span class="number">7890</span>);</span><br><span class="line">        ammeter.accept(homeVisitor);</span><br><span class="line"></span><br><span class="line">        Visitor industryVisitor = <span class="keyword">new</span> IndustryAmmeterVisitor(); <span class="comment">// 按照工业标准计算电费的”计表员“</span></span><br><span class="line">        ammeter.setElectricAmount(<span class="number">7890</span>);</span><br><span class="line">        ammeter.accept(industryVisitor);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210715191617230.png" alt></p>
<h4 id="3-1-2-4-适合策略模式的场景">3.1.2.4 适合策略模式的场景</h4>
<p><strong>某个类可能用自己的实例方法操作自己的数据，但在某些设计中，可能需要定义作用于类中的数据的新操作，而且这个新的操作不应该由该类中的某个实例方法来承担。</strong></p>
<p>(1)在一个对象结构中，例如某个集合中，包含很多对象，<strong>想对集合中的对象增加一些新的操作</strong>。</p>
<p>(2)<strong>需要对集合中的对象进行很多不同的并且不相关的操作，而又不想修改对象的类</strong>。在访问者接口中定义一些关于集合中对对象的操作。</p>
<h2 id="3-2-结构型">3.2 结构型</h2>
<p>涉及<strong>如何合理的组合类和对象</strong>。</p>
<h3 id="3-2-1-装饰模式">3.2.1 装饰模式</h3>
<p><strong>动态地给对象添加一些额外的职责</strong>，相比于生成子类更为灵活。</p>
<h4 id="3-2-1-1-结构">3.2.1.1 结构</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>抽象组件（Component）</strong>，被装饰者</p>
<blockquote>
<p>抽象类，定义了需要进行装饰的方法</p>
</blockquote>
</li>
<li class="lvl-2">
<p><strong>装饰（Decorator）</strong>，装饰者</p>
<blockquote>
<p><strong>需要包含被装饰者的引用</strong></p>
<p>&quot;装饰&quot;角色是抽象组件的一个子类</p>
<p>&quot;装饰&quot;角色可以是抽象类，也可以是一个非抽象类</p>
</blockquote>
</li>
<li class="lvl-2">
<p>具体组件（Concrete Component）</p>
</li>
<li class="lvl-2">
<p>具体装饰（Concrete Decorator）</p>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210715195114785.png" alt></p>
</li>
</ul>
<h4 id="3-2-1-2-小框架">3.2.1.2 小框架</h4>
<p>给麻雀安装智能电子翅膀。智能电子翅膀可以使麻雀不使用自己的翅膀就能飞行50m，那么一只安装了智能电子翅膀的麻雀就能飞行150m,安装了两个智能电子翅膀就能飞行200m，以此类推。</p>
<p>抽象组件</p>
<p>Bird.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Bird</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体组件</p>
<p>Sparrow.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sparrow</span> <span class="keyword">extends</span> <span class="title">Bird</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> DISTANCE = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DISTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>装饰</p>
<p>Decorator.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">Bird</span> </span>&#123;</span><br><span class="line">    Bird bird; <span class="comment">// 被装饰者</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorator</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Decorator</span><span class="params">(Bird bird)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bird = bird;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">int</span> <span class="title">eleFly</span><span class="params">()</span></span>; <span class="comment">// 用于修饰fly()的方法，行为由具体装饰者实现</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>具体装饰</p>
<p>SparrowDecorator.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SparrowDecorator</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> DISTANCE = <span class="number">50</span>; <span class="comment">// eleFly方法（模拟电子翅膀）能飞50m</span></span><br><span class="line"></span><br><span class="line">    SparrowDecorator(Bird bird) &#123;</span><br><span class="line">        <span class="keyword">super</span>(bird);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;<span class="comment">// 被装饰的方法</span></span><br><span class="line">        <span class="keyword">int</span> distance = <span class="number">0</span>;</span><br><span class="line">        distance = bird.fly() + eleFly();</span><br><span class="line">        <span class="keyword">return</span> distance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">eleFly</span><span class="params">()</span> </span>&#123;<span class="comment">// 具体装饰者重写装饰者中用于装饰的方法</span></span><br><span class="line">        <span class="keyword">return</span> DISTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-1-3-应用小框架编写应用程序">3.2.1.3 应用小框架编写应用程序</h4>
<p>把上述那些类看成一个小框架，使用小框架中的类编写一个应用程序</p>
<p>Application.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Bird bird = <span class="keyword">new</span> Sparrow();</span><br><span class="line">        System.out.println(<span class="string">&quot;没有安装电子翅膀的小鸟飞行距离：&quot;</span> + bird.fly());</span><br><span class="line">        bird = <span class="keyword">new</span> SparrowDecorator(bird);<span class="comment">// bird通过“装饰”安装了1个电子翅膀</span></span><br><span class="line">        System.out.println(<span class="string">&quot;安装1个电子翅膀的小鸟飞行距离：&quot;</span> + bird.fly());</span><br><span class="line">        bird = <span class="keyword">new</span> SparrowDecorator(bird);<span class="comment">// bird通过“装饰”安装了2个电子翅膀</span></span><br><span class="line">        System.out.println(<span class="string">&quot;安装2个电子翅膀的小鸟飞行距离：&quot;</span> + bird.fly());</span><br><span class="line">        bird = <span class="keyword">new</span> SparrowDecorator(bird);<span class="comment">// bird通过“装饰”安装了3个电子翅膀</span></span><br><span class="line">        System.out.println(<span class="string">&quot;安装3个电子翅膀的小鸟飞行距离：&quot;</span> + bird.fly());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210715201334149.png" alt></p>
<p>思考：想要bird飞行240m怎么办？</p>
<p>使用多个装饰者,新增一个类即可。</p>
<p>SparrowDecoratorTwo.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SparrowDecoratorTwo</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> DISTANCE = <span class="number">20</span>;<span class="comment">// eleFly方法能飞20m</span></span><br><span class="line"></span><br><span class="line">    SparrowDecoratorTwo(Bird bird) &#123;</span><br><span class="line">        <span class="keyword">super</span>(bird);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> distance = <span class="number">0</span>;</span><br><span class="line">        distance = bird.fly() + eleFly();</span><br><span class="line">        <span class="keyword">return</span> distance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">eleFly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DISTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Bird bird = <span class="keyword">new</span> Sparrow();</span><br><span class="line">bird = <span class="keyword">new</span> SparrowDecoratorTwo(bird);</span><br><span class="line">bird = <span class="keyword">new</span> SparrowDecorator(bird);</span><br><span class="line">bird = <span class="keyword">new</span> SparrowDecorator(bird);</span><br><span class="line">bird = <span class="keyword">new</span> SparrowDecoratorTwo(bird); <span class="comment">// 这样能飞240m了</span></span><br></pre></td></tr></table></figure>
<h4 id="3-2-1-4-适合装饰模式的场景">3.2.1.4 适合装饰模式的场景</h4>
<p>程序希望<strong>动态地增强类的某个对象的功能，而又不影响该类的其他对象</strong></p>
<h3 id="3-2-2-适配器模式">3.2.2 适配器模式</h3>
<p><strong>将一个类的接口转换成客户希望的另外一个接口</strong></p>
<h4 id="3-2-2-1-结构">3.2.2.1 结构</h4>
<ul class="lvl-0">
<li class="lvl-2">
<p><strong>目标（Target）</strong></p>
<blockquote>
<p>是一个接口，是客户想用的接口</p>
</blockquote>
</li>
<li class="lvl-2">
<p><strong>被适配者（Adaptee）</strong></p>
<blockquote>
<p>是一个已经存在的接口或抽象类</p>
</blockquote>
</li>
<li class="lvl-2">
<p><strong>适配器（Adapter）</strong></p>
<blockquote>
<p>是一个类，<strong>实现了目标接口</strong>，并<strong>包含被适配者的引用</strong></p>
</blockquote>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210715203838488.png" alt></p>
</li>
</ul>
<h4 id="3-2-2-2-小框架">3.2.2.2 小框架</h4>
<p>用户有一台洗衣机，使用交流电，现在用户新买了一个录音机，录音机只能使用直流电。由于供电系统供给用户家里的是交流电，所以用户需要适配器将交流电转化为直流电以便录音机使用。</p>
<p>目标</p>
<p>DirectCurrent.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DirectCurrent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">giveDirectCurrent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>被适配者</p>
<p>AlternateCurrent.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AlternateCurrent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">giveAlternateCurrent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>适配器</p>
<p>ElectricAdapter.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ElectricAdapter</span> <span class="keyword">implements</span> <span class="title">DirectCurrent</span> </span>&#123;</span><br><span class="line">    AlternateCurrent out;</span><br><span class="line"></span><br><span class="line">    ElectricAdapter(AlternateCurrent out) &#123;</span><br><span class="line">        <span class="keyword">this</span>.out = out;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">giveDirectCurrent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String m = out.giveAlternateCurrent(); <span class="comment">// 先有out得到交流电</span></span><br><span class="line">        StringBuffer str = <span class="keyword">new</span> StringBuffer(m);</span><br><span class="line">        <span class="comment">// 以下将交流电转化为直流电</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (str.charAt(i) == <span class="string">&#x27;0&#x27;</span>) &#123;</span><br><span class="line">                str.setCharAt(i, <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        m = <span class="keyword">new</span> String(str);</span><br><span class="line">        <span class="keyword">return</span> m; <span class="comment">// 返回直流电</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-2-2-3-应用小框架编写应用程序">3.2.2.3 应用小框架编写应用程序</h4>
<p>把上述那些类看成一个小框架，使用小框架中的类编写一个应用程序</p>
<p>Application.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Application</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        AlternateCurrent aElectric = <span class="keyword">new</span> PowerCompany();<span class="comment">// 交流电</span></span><br><span class="line">        Wash wash = <span class="keyword">new</span> Wash();</span><br><span class="line">        wash.turnOn(aElectric);<span class="comment">// 洗衣机使用交流电</span></span><br><span class="line">        <span class="comment">// 对交流电aElectric进行适配得到直流电dElectric</span></span><br><span class="line">        DirectCurrent dElectric = <span class="keyword">new</span> ElectricAdapter(aElectric);<span class="comment">// 将交流电适配成直流电</span></span><br><span class="line">        Recorder recorder = <span class="keyword">new</span> Recorder();</span><br><span class="line">        recorder.turnOn(dElectric);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PowerCompany</span> <span class="keyword">implements</span> <span class="title">AlternateCurrent</span> </span>&#123;<span class="comment">// 交流电提供者</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">giveAlternateCurrent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;1010101010101010101010&quot;</span>;<span class="comment">// 用这样的串表示交流电</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wash</span> </span>&#123;</span><br><span class="line">    String name; <span class="comment">// 洗衣机使用交流电</span></span><br><span class="line"></span><br><span class="line">    Wash() &#123;</span><br><span class="line">        name = <span class="string">&quot;洗衣机&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Wash(String s) &#123;</span><br><span class="line">        name = s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">(AlternateCurrent a)</span> </span>&#123;</span><br><span class="line">        String s = a.giveAlternateCurrent();</span><br><span class="line">        System.out.println(name + <span class="string">&quot;使用交流电:\n&quot;</span> + s);</span><br><span class="line">        System.out.println(<span class="string">&quot;开始洗衣物......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Recorder</span> </span>&#123;</span><br><span class="line">    String name;<span class="comment">// 录音机使用直流电</span></span><br><span class="line"></span><br><span class="line">    Recorder() &#123;</span><br><span class="line">        name = <span class="string">&quot;录音机&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Recorder(String s) &#123;</span><br><span class="line">        name = s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnOn</span><span class="params">(DirectCurrent a)</span> </span>&#123;</span><br><span class="line">        String s = a.giveDirectCurrent();</span><br><span class="line">        System.out.println(name + <span class="string">&quot;使用直流电:\n&quot;</span> + s);</span><br><span class="line">        System.out.println(<span class="string">&quot;开始录音......&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/image-20210715205815021.png" alt></p>
<h4 id="3-2-2-4-适合适配器模式的场景">3.2.2.4 适合适配器模式的场景</h4>
<p>将一个类的接口转换成客户希望的另外一个接口。</p>
<h2 id="3-3-创建型">3.3 创建型</h2>
<p>涉及对象的实例化，不让用户依赖于对象的创建或者排列方式，<strong>避免用户直接使用new创建对象</strong>。</p>
<h3 id="3-3-1-工厂方法模式">3.3.1 工厂方法模式</h3>
<p><strong>把类的实例化延迟到子类</strong></p>
<h1>四、设计模式所支持的设计的可变方面</h1>
<h2 id="4-1-创建型">4.1 创建型</h2>
<table>
<thead>
<tr>
<th style="text-align:center">设计模式</th>
<th style="text-align:center">可变的方面</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Abstract Factory</td>
<td style="text-align:center">产品对象家族</td>
</tr>
<tr>
<td style="text-align:center">Builder</td>
<td style="text-align:center">如何创建一个组合对象</td>
</tr>
<tr>
<td style="text-align:center">Factory Method</td>
<td style="text-align:center">被实例化的子类</td>
</tr>
<tr>
<td style="text-align:center">Prototype</td>
<td style="text-align:center">被实例化的类</td>
</tr>
<tr>
<td style="text-align:center">Singleton</td>
<td style="text-align:center">一个类的唯一实例</td>
</tr>
</tbody>
</table>
<h2 id="4-2-结构型">4.2 结构型</h2>
<table>
<thead>
<tr>
<th style="text-align:center">设计模式</th>
<th style="text-align:center">可变的方面</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Adapter</td>
<td style="text-align:center">对象的接口</td>
</tr>
<tr>
<td style="text-align:center">Bridge</td>
<td style="text-align:center">对象的实现</td>
</tr>
<tr>
<td style="text-align:center">Composite</td>
<td style="text-align:center">一个对象的结构和组成</td>
</tr>
<tr>
<td style="text-align:center">Decorator</td>
<td style="text-align:center">对象的职责，不生成子类</td>
</tr>
<tr>
<td style="text-align:center">Facade</td>
<td style="text-align:center">一个子系统的接口</td>
</tr>
<tr>
<td style="text-align:center">Flyweight</td>
<td style="text-align:center">对象的存储开销</td>
</tr>
<tr>
<td style="text-align:center">Proxy</td>
<td style="text-align:center">如何访问一个对象；该对象的位置</td>
</tr>
</tbody>
</table>
<h2 id="4-3-行为型">4.3 行为型</h2>
<table>
<thead>
<tr>
<th style="text-align:center">设计模式</th>
<th style="text-align:center">可变的方面</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Chain of Responsibility</td>
<td style="text-align:center">满足一个请求的对象</td>
</tr>
<tr>
<td style="text-align:center">Command</td>
<td style="text-align:center">何时、怎样满足一个请求对象</td>
</tr>
<tr>
<td style="text-align:center">Interpreter</td>
<td style="text-align:center">一个语言的文法及解释</td>
</tr>
<tr>
<td style="text-align:center">Iterator</td>
<td style="text-align:center">如何遍历、访问一个聚合的各元素</td>
</tr>
<tr>
<td style="text-align:center">Mediator</td>
<td style="text-align:center">对象之间怎样交互、和谁交互</td>
</tr>
<tr>
<td style="text-align:center">Memento</td>
<td style="text-align:center">一个对象中哪些私有信息存放在该对象之外，以及在什么时候进行存储</td>
</tr>
<tr>
<td style="text-align:center">Observer</td>
<td style="text-align:center">多个对象依赖于另外一个对象，而这些对象又如何保持一致</td>
</tr>
<tr>
<td style="text-align:center">State</td>
<td style="text-align:center">对象的状态</td>
</tr>
<tr>
<td style="text-align:center">Strategy</td>
<td style="text-align:center">算法</td>
</tr>
<tr>
<td style="text-align:center">Template Method</td>
<td style="text-align:center">算法中的某些步骤</td>
</tr>
<tr>
<td style="text-align:center">Visitor</td>
<td style="text-align:center">某些可作用于一个（组）对象上的操作，但不修改这些对象的类</td>
</tr>
</tbody>
</table>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">小王同学</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://morvan.top/2020/07/12/设计模式/">https://morvan.top/2020/07/12/设计模式/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://morvan.top">小王同学的精神驿站</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/11/28/%E6%9D%82%E8%AE%B0/"><i class="fa fa-chevron-left">  </i><span>杂记</span></a></div><div class="next-post pull-right"><a href="/2020/07/06/Java%E8%AF%AD%E8%A8%80%E7%9F%A5%E8%AF%86%E7%82%B9%E5%B0%8F%E7%BB%93/"><span>Java语言知识点小结</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://morvan.top/2020/07/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/';
  this.page.identifier = '2020/07/12/设计模式/';
  this.page.title = '设计模式';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'cholen' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://cholen.disqus.com/count.js" async></script></div></div><footer class="footer-bg" style="background-image: url(/img/wallhaven-8ogod1.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2015 - 2023 By 小王同学</div><div class="footer_custom_text">hitokoto</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/algolia.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script src="/js/katex.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>